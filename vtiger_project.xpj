<?xml version="1.0" encoding="UTF-8"?><biztoolcfg qryfmtOpCreate="SET @seq=0;SELECT SUBSTR(project_no,-5)+0 INTO @seq FROM vtigercrm6.vtiger_project WHERE DATE(creation_date)=CURDATE() ORDER BY project_no DESC LIMIT 0,1;SELECT generate_orderNo(Code_Prefix, DT_MODE, @seq,'','') INTO @odn FROM vtigercrm6.xdoc_code WHERE docType='prj';insert into %{table} %{data};" qryfmtOpUpdate="" loadedClick="0" tableNm="vtiger_project" referLst="0" onLoadInit="0" tableTxt="vtiger_project" LstTP="Lst" lines2Link="vtiger_projecttask" jointbls="1" header2Link="" exdata4select=""><DataLstExtElmt><![CDATA[<DbDetails><DbTable>vtigercrm6.vtiger_project v LEFT JOIN vtigercrm6.vtiger_projecttype v0 ON v.projecttype=v0.projecttypeid LEFT JOIN vtigercrm6.vtiger_projectstatus v1 ON v.projectstatus=v1.projectstatusid LEFT JOIN vtigercrm6.vtiger_projectpriority v2 ON v.projectpriority=v2.projectpriorityid LEFT JOIN vtigercrm6.vtiger_users v3 ON v.release_by=v3.id LEFT JOIN vtigercrm6.vtiger_users v4 ON v.created_by=v4.id LEFT JOIN vtigercrm6.vtiger_users v5 ON v.last_update_by=v5.id left join vtigercrm6.vtiger_account ac on v.linktoaccountscontacts=ac.accountid  left join vtigercrm6.users_v u on v.responsible=u.id LEFT JOIN vtigercrm6.vtiger_salesorder_item soi ON v.refertbl='salesorder_item' AND v.referid=soi.salesorder_itemid LEFT JOIN vtigercrm6.vtiger_salesorder so ON soi.salesorderid=so.salesorderid LEFT JOIN vtigercrm6.vtiger_projectmilestone pm ON v.projectid=pm.projectid AND !pm.reviewed LEFT JOIN (vtigercrm6.attachment a JOIN vtigercrm6.vtiger_projecttask pt ON a.reftbl='vtiger_projecttask' AND a.refid=pt.projecttaskid) ON pt.projectid=v.projectid AND pt.project_ms_idx=pm.project_ms_idx </DbTable><Data>v.project_no,u.fullname responsible,accountname linktoaccountscontacts,v.projectname,itemcode,itemimg,soi.customitem,itemname,MIN(pm.projectmilestonename) projectmilestonename,(SELECT GROUP_CONCAT(description SEPARATOR '; ') FROM vtigercrm6.attachment WHERE reftbl='vtiger_projectmilestone' AND refid=pm.projectmilestoneid) memo,GROUP_CONCAT(a.description SEPARATOR ';') description,GROUP_CONCAT(a.attachment SEPARATOR ';') attachments,so.subject,v0.projecttype projecttype,v1.projectstatus projectstatus,v.startdate,v.actualenddate,v2.projectpriority projectpriority,v3.user_name release_by,v.release_date,v4.user_name created_by,v.creation_date,v5.user_name last_update_by,v.last_update_date,v.projectid ,GROUP_CONCAT(a.location SEPARATOR ';') location,v1.projectstatusid</Data><Where>v.projectstatus&lt;6</Where><Queryformat>select %{data} from %{dbtable} where if(%{role_id}&gt;3,v.created_by='%{user_id}' or v.responsible='%{user_id}',1) and  %{where} GROUP BY projectid  ORDER BY projectid limit %{StartRow},%{PgSize}</Queryformat></DbDetails> <OnChanged><assign name="pagecur" expr="js(%{vtiger_project_vLst[currentpage]}+1)"/></OnChanged>f]]></DataLstExtElmt><DataLstExtAttr><![CDATA[        AutoSizeCol="0" Heading="project_no,100;responsible,120;accountname,150;projectname,150;productcode,100;imagename,100;customitem,100;productname,100;projectmilestonename,100;progress_memo,100;description,300;attachments,300;subject,120;projecttype,50;projectstatus,50;startdate,80;actualenddate,80;projectpriority,50;release_by,80;release_date,150;"]]></DataLstExtAttr><operators4v><![CDATA[<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="vtiger_project_ops.xml"/>]]></operators4v><Ctrls><Ctrl Required="1" name="projectname" xTp="TextBox" ctrltype="TextBox"/><Ctrl noused="1" noquery="1" name="projectdays" xTp="TextBox" ctrldbdata="0~99" ctrltype="TextBox"/><Ctrl noused="1" noquery="1" name="targetenddate"/><Ctrl noquery="1" ctrldbname="vtigercrm6." name="projecttype" ctrldbwhere="presence" ctrldbtable="vtiger_projecttype" xTp="ComboBox" ctrldbdata="projecttype,projecttypeid" ctrldbdatarel="projecttypeid" ctrltype="ComboBox"><extattr><![CDATA[onload="init" selectedIndex="1"]]></extattr></Ctrl><Ctrl noquery="1" nomodify="1" ctrldbname="vtigercrm6." ctrlhide="1" name="projectstatus" ctrldbwhere="presence" insertparam="if(%{bAutoRelease},3,2)" ctrldbtable="vtiger_projectstatus" noUpdate="1" xTp="ComboBox" ctrldbdata="projectstatus,projectstatusid" ctrldbdatarel="projectstatusid" ctrltype="ComboBox"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="startdate" noInsert="1" noUpdate="1"/><Ctrl noused="1" noquery="1" nomodify="1" ctrldbname="vtigercrm6." ctrlhide="1" name="progress" noInsert="1" ctrldbtable="vtiger_progress" noUpdate="1" xTp="ComboBox" ctrldbdata="progress,progressid" ctrltype="ComboBox"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="actualenddate" noInsert="1" noUpdate="1"/><Ctrl noquery="1" ctrldbname="vtigercrm6." name="projectpriority" ctrldbwhere="presence" ctrldbtable="vtiger_projectpriority" xTp="ComboBox" ctrldbdata="projectpriority,projectpriorityid" ctrldbdatarel="projectpriorityid" ctrltype="ComboBox"><extattr><![CDATA[onload="init" selectedIndex="1"]]></extattr></Ctrl><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="project_no" insertparam="@odn" noUpdate="1" xTp="TextBox" ctrltype="TextBox"/><Ctrl noused="1" noquery="1" name="targetbudget" xTp="TextBox" ctrltype="TextBox"/><Ctrl ctrldbname="vtigercrm6." name="responsible" ctrldbtable="users_v" xTp="ComboBox" ctrldbdata="fullname,id" ctrldbdatarel="id" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl noquery="1" ctrldbname="vtigercrm6." name="linktoaccountscontacts" ctrldbtable="vtiger_account" xTp="ComboBox" ctrldbdata="accountname,accountid" ctrldbdatarel="accountid" ctrltype="ComboBox"><extelmt><![CDATA[<OnSelEndOk><submit next="referid"/></OnSelEndOk>]]></extelmt><extattr><![CDATA[onload="init"]]></extattr><addon><![CDATA[<MagicCtrl Name="refresh%{colNm}" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="%{colNm}"/></OnClick></MagicCtrl>\r\n]]></addon></Ctrl><Ctrl noquery="1" nomodify="1" ctrldbname="vtigercrm6." ctrlhide="1" name="referid" ctrldbwhere="sostatus in (1,2) and accountid='%{linktoaccountscontacts[accountid]}'" ctrldbtable="vtiger_salesorder" noUpdate="1" xTp="ComboBox" ctrldbdata="subject,salesorderid" ctrldbdatarel="salesorderid" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr><addon><![CDATA[<MagicCtrl Name="refresh%{colNm}" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="%{colNm}"/></OnClick></MagicCtrl>\r\n]]></addon><addonx><![CDATA[<GroupBox cols="xs12 sm6 md4 lg3" Multiline="0" Name="GB_bAutoRelease"><Ctrls> <CheckBox Text="bAutoRelease" ToolTip="ttp_bAutoRelease" Checked="true" Name="bAutoRelease" Size="230,20"/> </Ctrls></GroupBox>]]></addonx></Ctrl><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="projectid" noInsert="1" noInAndUp="1" noUpdate="1" xTp="TextBox" ctrltype="TextBox"/><Ctrl noused="1" noquery="1" name="projecturl" xTp="TextBox" ctrltype="TextBox"/><Ctrl noquery="1" nomodify="1" ctrldbname="vtigercrm6." ctrlhide="1" name="release_by" insertparam="if(%{bAutoRelease},'%{user_id}',null)" ctrldbtable="vtiger_users" noUpdate="1" ctrldbdata="user_name,id" ctrldbdatarel="id"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="release_date" insertparam="if(%{bAutoRelease},now(),null)" noUpdate="1"/><Ctrl ctrlsize="630,150" noquery="1" name="description" newrow="1"><extattr><![CDATA[autosizeable="0"]]></extattr></Ctrl><Ctrl noquery="1" ctrldbname="vtigercrm6." ctrlhide="1" name="created_by" insertparam="'%{user_id}'" ctrldbtable="vtiger_users" noUpdate="1" ctrldbdata="user_name,id" ctrldbdatarel="id"/><Ctrl noquery="1" ctrlhide="1" name="creation_date" insertparam="now()" noUpdate="1"/><Ctrl noquery="1" ctrldbname="vtigercrm6." ctrlhide="1" name="last_update_by" insertparam="'%{user_id}'" ctrldbtable="vtiger_users" updateparam="'%{user_id}'" ctrldbdata="user_name,id" ctrldbdatarel="id"/><Ctrl noquery="1" ctrlhide="1" name="last_update_date" insertparam="now()" updateparam="now()"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="refertbl"/><Ctrl noused="1" name="projecthours"/></Ctrls></biztoolcfg>