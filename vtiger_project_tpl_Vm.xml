<WndTap Name="vtiger_project_tpl_v" Text="vtiger_project_tpl_v">
<WndTaps>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="vtiger_project_tpl_Vem.xml" popup="1"/>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="vtiger_project_tpl_milestone_Ve.xml" popup="1"/>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="vtiger_project_tpl_task_Ve.xml" popup="1"/>
<WndTap Name="createPrjWithTpl" Text="createPrjWithTpl" popup="1">
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="lan\vtiger_project_tpl.xml"/>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="lan\vtiger_salesorder.xml"/>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="lan\vtiger_salesorder_item.xml"/>
	<Ctrls><GroupBox Name="GBDEDITvtiger_project_tpl"><Ctrls>
		<GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_projecttplname"><Ctrls>
		<Label Align="Right" Text="projecttplname" Name="lb_projecttplname" Size="60,20"/>
		<TextBox Weight="170" Text="" ToolTip="ttp_projecttplname" Name="projecttplname" Size="170,20">
			<DbDetails>
			<Index>projecttplid</Index>
			<DbTable>vtigercrm6.vtiger_project_tpl</DbTable>
			<Data>projecttplname,projecttplid</Data></DbDetails>
			</TextBox>
		</Ctrls></GroupBox>
		<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_projectname"><Ctrls>
		<Label Align="Right" Text="projectname" Name="lb_projectname" Size="60,20"/>
		<TextBox Weight="170" Text="" ToolTip="ttp_projectname" Name="projectname" Size="170,20"/>
		</Ctrls></GroupBox>
		<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_salesorderid"><Ctrls>
		<Label Align="Right" Text="salesorderid" onload="init" Name="lb_salesorderid" Size="60,20"/>
		<ComboBox Weight="150" Text="" ToolTip="ttp_salesorderid" onload="init" Name="salesorderid" Size="150,100">
			<DbDetails>
		<Index>salesorderid</Index>
		<DbTable>vtigercrm6.vtiger_salesorder</DbTable>
		<Data>subject,salesorderid</Data>
		<Where>sostatus in (1,2)</Where>
		<queryFormat/></DbDetails>
		<OnSelEndOk><submit next="referid"/></OnSelEndOk></ComboBox>
		<MagicCtrl Name="refreshsalesorderid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="salesorderid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
		<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Multiline="0" Name="GB_referid"><Ctrls>
		<Label Align="Right" Text="itemcode" onload="init" Name="lb_referid" Size="60,20"/>
		<ComboBox Weight="150" Text="" ToolTip="ttp_referid" onload="init" Name="referid" Size="150,100">
			<DbDetails>
		<Index>salesorder_itemid</Index>
		<DbTable>vtigercrm6.vtiger_salesorder_item</DbTable>
		<Data>itemcode,itemname,salesorder_itemid</Data>
		<Where>salesorderid='%{salesorderid[salesorderid]}'</Where>
		<queryFormat/></DbDetails></ComboBox>
		<MagicCtrl Name="refreshreferid" Link="tip:刷新" images=",data/refresh.png" button="type:0" Size="20,20"><OnClick><submit next="referid"/></OnClick></MagicCtrl>\r\n</Ctrls></GroupBox>
		<BR AutoHeight="1"/><GroupBox cols="xs12 sm6 md4" Name="GBOPEvtiger_project_tpl_task" Size="100,100"><Ctrls>
		<Button sqlpkinsert="projecttpltaskid" Text="create" ToolTip="ttp_createvtiger_project_tpl_task" Name="insertvtiger_project_tpl_task" Size="50,20">
		<OnClick>CALL createprjwithtpl
		<DbDetails><queryFormat>select createprojectwithtpl('%{projecttplname[projecttplid]}','%{projectname}','salesorder_item','%{referid[salesorder_itemid]}','%{user_id}');</queryFormat></DbDetails>
		<submit namelist="DbDetails"/></OnClick>
			</Button><TAB/>
		</Ctrls></GroupBox>
	</Ctrls></GroupBox>
</Ctrls></WndTap>
</WndTaps>
<var name="searchtmpl"><projecttplname format="(v.projecttplname like '%%{opvalue}%')"/><projectdays format="(v.projectdays like '%%{opvalue}%')"/><projecttype format="v.projecttype='%{opvalue}'"/><projectpriority format="v.projectpriority='%{opvalue}'"/><description format="(v.description like '%%{opvalue}%')"/><created_by format="v.created_by='%{opvalue}'"/><creation_date format="(v.creation_date between '%{creation_date[datetime]}' and '%{creation_date[datetime2]}')"/><last_update_by format="v.last_update_by='%{opvalue}'"/><last_update_date format="(v.last_update_date between '%{last_update_date[datetime]}' and '%{last_update_date[datetime2]}')"/><projecttplid format="(v.projecttplid like '%%{opvalue}%')"/></var>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="lan\vtiger_project_tpl.xml"/>
<Ctrls><GroupBox  Name="GBvtiger_project_tpl" id="vtiger_project_tpl" Text="vtiger_project_tpl" Size="100,100"><Ctrls>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="vtiger_project_tpl_Vs.xml"/>
<BR AutoHeight="1"/><GroupBox  Name="GBOPVvtiger_project_tpl" Size="100,20" cols="xs12 sm6 md4"><Ctrls>
<Button Text="addone" ToolTip="ttp_addone" Name="addone" Size="50,20">	<OnClick><submit next="$this.vtiger_project_tpl.GBDEDITvtiger_project_tpl" function="reset"/><assign name="$this.vtiger_project_tpl.frmwndctrl" expr="%{$this.vtiger_project_tpl_vLst}"/></OnClick>	</Button><TAB/>	
<Button Text="reset" ToolTip="ttp_resetvtiger_project_tpl" Name="resetvtiger_project_tpl" Size="50,20">	<OnClick>	<submit next="GBDEDITvtiger_project_tpl" function="reset"/>	</OnClick>	</Button><TAB/>	
<Button Text="Search" ToolTip="ttp_gsearchvtiger_project_tpl" Name="gsearchvtiger_project_tpl" Size="50,20">	<OnClick>	
<search next="vtiger_project_tpl_vLst" listed="0" prefixwhere="0" prefixand="0" inputed="1">%{searchtmpl}</search><submit next="GBDEDITvtiger_project_tpl" namelist="search" function="search"/>	
<search next="records_vtiger_project_tpl" listed="0" prefixwhere="1" prefixand="0"  inputed="1">%{searchtmpl}</search><submit next="GBDEDITvtiger_project_tpl" namelist="search" function="search"/>	
</OnClick></Button><TAB/></Ctrls></GroupBox>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="vtiger_project_tpl_Vpg.xml"/>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="vtiger_project_tpl_Vpgop.xml"/>
<BR AutoHeight="1"/><xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="vtiger_project_tpl_Vv.xml"/>
</Ctrls></GroupBox>
</Ctrls></WndTap>
